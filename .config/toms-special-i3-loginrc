#!/bin/bash

setxkbmap -option -option caps:backspace -option shift:both_capslock -option numpad:mac dvorak

thinkpad_kb=$(xinput | grep 'AT Translated Set' | egrep -o 'id=\S+' | egrep -o '[0-9]+') && (
	echo setting laptop modifiers for $thinkpad_kb
	mkdir -p $HOME/.xkb/keymap
	setxkbmap -print | sed -e '/xkb_symbols/s/"[[:space:]]/+local&/' > $HOME/.xkb/keymap/custom
	xkbcomp -i $thinkpad_kb -w0 -I$HOME/.xkb/ -R$HOME/.xkb/ keymap/custom
	xkbcomp -i $thinkpad_kb .xkb/custom.xkm $DISPLAY
)

[[ -x ~/.fehbg ]] && ~/.fehbg

synclient \
  TapButton1=0 TapButton2=0 \
  RightButtonArea{Left,Right,Top,Bottom}=0 \
  VertEdgeScroll=0 \
  HorizTwoFingerScroll=1 HorizScrollDelta=20 \
  TouchpadOff=1 ClickFinger1=0 ClickFinger2=0  # turn it off by default; as in ~/bin/toggle-trackpad
